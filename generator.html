<!DOCTYPE html>
<html>
<head><title>Sitemap Generator</title></head>
<body>
    <h2>Movies & TV Sitemap Generator</h2>
    <button onclick="generate()">Generate Movies Sitemap</button>
    <textarea id="result" style="width:100%; height:400px; margin-top:20px;"></textarea>

<script>
async function generate() {
    const key = '22be462e6d3de1dbab03d1ca50847b5a';
    const domain = 'https://movies-sx1o.vercel.app'; // GANTI DOMAIN ANDA
    const today = new Date().toISOString().split('T')[0];
    
    let xml = `<?xml version="1.0" encoding="UTF-8"?>\n<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1">\n`;

    // Ambil Trending & Top Rated
    const urls = [
        `https://api.themoviedb.org/3/trending/movie/day?api_key=${key}`,
        `https://api.themoviedb.org/3/movie/top_rated?api_key=${key}`
    ];

    for (let url of urls) {
        const res = await fetch(url);
        const data = await res.json();
        data.results.forEach(m => {
            xml += `  <url>
    <loc>${domain}/movie.html?id=${m.id}</loc>
    <lastmod>${today}</lastmod>
    <changefreq>daily</changefreq>
    <priority>0.9</priority>
    <video:video>
      <video:thumbnail_loc>https://image.tmdb.org/t/p/w500${m.poster_path}</video:thumbnail_loc>
      <video:title>${m.title.replace(/&/g, '&amp;')}</video:title>
      <video:description>${m.overview.substring(0,150).replace(/&/g, '&amp;')}...</video:description>
      <video:player_loc>${domain}/movie.html?id=${m.id}</video:player_loc>
      <video:publication_date>${m.release_date}T00:00:00+07:00</video:publication_date>
    </video:video>
  </url>\n`;
        });
    }
    xml += `</urlset>`;
    document.getElementById('result').value = xml;
    alert("Sitemap Berhasil Dibuat! Copy teks di bawah ke movies-sitemap.xml");
}
</script>
</body>

</html>
